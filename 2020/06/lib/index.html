<!DOCTYPE html>
<html>
<head hexo-theme='https://volantis.js.org/#1.6.4'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
    <title>附录A.2. 模块及扩展库 - Python,C/C++ Club</title>
  
    <meta name="keywords" content="Python">
  
  
    <meta name="description" content="附录A.2. 模块及扩展库  《Python编辑基础及应用》">
  

  <!-- feed -->
  

  <!-- import meta -->
  
    
      <meta name='theme-color' content='#FFFFFF'>
    
      <meta name='msapplication-TileColor' content='#1BC3FB'>
    
      <meta name='msapplication-config' content='https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/favicon/favicons/browserconfig.xml'>
    
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css">
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  
  <link rel="shortcut icon" type='image/x-icon' href="https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/favicon/favicon.ico">
  

  

  <!-- import link -->
  
  
  <link rel='shortcut icon' type='image/x-icon' href='https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/favicon/favicon.ico'>
  <link rel='icon' type='image/x-icon' sizes='32x32' href='https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/favicon/favicons/favicon-32x32.png'>
  <link rel='apple-touch-icon' type='image/png' sizes='180x180' href='https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/favicon/favicons/apple-touch-icon.png'>
  <link rel='mask-icon' color='#1BC3FB' href='https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/favicon/favicons/safari-pinned-tab.svg'>
  <link rel='manifest' href='https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/favicon/favicons/site.webmanifest'>
  

  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.6.4/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  <header class="l_header nav-blur">
  <div id="loading-bar-wrapper">
    <div id="loading-bar"></div>
  </div>
	<div class='wrapper'>
		<div class="nav-main container container--flex">
      
        <a class="logo flat-box" target="_self" href='/' >
          
            
              
              
                CODELEARN
              
            
          
        </a>
      

			<div class='menu navigation'>
				<ul class='h-list'>
          
  					
  						<li>
								<a class="nav flat-box" href="/about/"
                  
                  
                  id="about">
									<i class='fas fa-flag fa-fw'></i>&nbsp;公告
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/"
                  
                  
                  id="home">
									<i class='fas fa-globe-asia fa-fw'></i>&nbsp;主页
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/download/"
                  
                  
                  id="download">
									<i class='fas fa-palette fa-fw'></i>&nbsp;下载
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/book/"
                  
                  
                  id="book">
									<i class='fas fa-file-alt fa-fw'></i>&nbsp;图书
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/mooc/"
                  
                  
                  id="mooc">
									<i class='fas fa-pen-alt fa-fw'></i>&nbsp;MOOC
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/thanks/"
                  
                  
                  id="thanks">
									<i class='fas fa-flask fa-fw'></i>&nbsp;致谢
								</a>
							</li>
      			
      		
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="搜索文档" />
        </form>
      </div>

			<ul class='switcher h-list'>
				
					<li class='s-search'><a class="fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li class='s-menu'><a class="fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo flat-box"></a>
			<ul class='switcher h-list'>
				<li class='s-comment'><a class="flat-btn fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li class='s-toc'><a class="flat-btn fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone white-box">
    <header>
		<nav class="menu navigation">
      <ul>
        
          
            <li>
							<a class="nav flat-box" href="/about/"
                
                
                id="about">
								<i class='fas fa-flag fa-fw'></i>&nbsp;公告
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/"
                
                
                id="home">
								<i class='fas fa-globe-asia fa-fw'></i>&nbsp;主页
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/download/"
                
                
                id="download">
								<i class='fas fa-palette fa-fw'></i>&nbsp;下载
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/book/"
                
                
                id="book">
								<i class='fas fa-file-alt fa-fw'></i>&nbsp;图书
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/mooc/"
                
                
                id="mooc">
								<i class='fas fa-pen-alt fa-fw'></i>&nbsp;MOOC
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/thanks/"
                
                
                id="thanks">
								<i class='fas fa-flask fa-fw'></i>&nbsp;致谢
							</a>
            </li>
          
       
      </ul>
		</nav>
    </header>
	</aside>
<script>setLoadingBarProgress(40);</script>



  <div class="l_body nocover">
    <div class='body-wrapper'>
      

<div class='l_main'>
  

  
    <article id="post" class="post white-box   article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  
    <h1 class="title">
      <a href="/2020/06/lib/">
        附录A.2. 模块及扩展库
      </a>
    </h1>
  


      
      <div class='new-meta-box'>
        
          
        
          
            
<div class='new-meta-item author'>
  <a href="https://codelearn.club" rel="nofollow">
    <img src="https://codelearn.club/images/author.png">
    <p>海洋饼干叔叔</p>
  </a>
</div>

          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2020年6月17日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/categories/Python/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Python</p>
    </a>
  </div>


          
        
          
            
  
    <div class="new-meta-item browse busuanzi">
      <a class='notlink'>
        <i class="fas fa-eye" aria-hidden="true"></i>
        <p>
          <span id="busuanzi_value_page_pv">
            <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>
          </span>
        </p>
      </a>
    </div>
  


          
        
      </div>
      
        <hr>
      
    </div>
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          <p>附录A.2. 模块及扩展库  《Python编辑基础及应用》</p>
<a id="more"></a>





<p>本书同名免费MOOC<a href="https://www.bilibili.com/video/BV1kt411R7uW/" target="_blank" rel="noopener"><strong>《Python编程基础及应用》</strong></a>在哔哩哔哩（B站）热播，作者带着你学。</p>
<hr>
<h2 id="附录A-2-模块及扩展库"><a href="#附录A-2-模块及扩展库" class="headerlink" title="附录A.2. 模块及扩展库"></a>附录A.2. 模块及扩展库</h2><p>Python从诞生之日起，就提供扩展接口，鼓励参与者通过编写”库”来扩展其功能。这些第三方“库”既可以是Python编写的， 也可以是C语言编写的。Python作为一种胶水语言，可以很方便地与其它语言相互调用。</p>
<p>能使用C或者其它更高效的语言来扩展Python的事实极大地方便了程序员。对于那些对执行效率要求不高的部分，直接用Python写，以便事半功倍；对于那些对执行效率有苛刻要求的部分，比如自动驾驶系统里的图像识别：从画面中找出交通信号灯并识别红、绿和转向，就可以用C或者C++来高效实现。</p>
<p>为了展示将“开源”和“共享”进行到底的决心，Python书写的代码默认是没办法“保密”的。也就是说，你即使把Python“编译”成了pyc文件(一种由py文件经“编译”预处理后的文件格式)，那些“有心”的软件使用者仍然可以不受约束地阅读和借鉴你的全部源代码。</p>
<p>作者目前只知道一种将Python代码“保密”的方法，那就是修改开源的Python解释器源代码，把其中的文件存储的部分改成“加密”的。这种做法在“开源”社区可能很不受欢迎。</p>
<h3 id="A-2-1-Python扩展库"><a href="#A-2-1-Python扩展库" class="headerlink" title="A.2.1 Python扩展库"></a>A.2.1 Python扩展库</h3><p>丰富的包/模块以及源源不断由开源社区的＂雷锋＂们制造的第三方扩展包/模块是Python广受欢迎的重要原因。现在作者试图用Python解决任何工程问题，决不是简单的＂埋头苦干＂，而是先搜索一下有没有现成的库可以利用。这些库有的包括在标准的Python安装里，称为“标准库”，有的需要单独安装。无论是“标准的”还是“第三方的”库，都是对Python功能的扩展，统称扩展库。下表介绍了一些”重要”的Python扩展库。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>简介</th>
</tr>
</thead>
<tbody><tr>
<td>PyQt4/PyQt5</td>
<td>Qt是一个历史悠久，广受赞誉的跨平台C++开发库及IDE。它可以非常容易地编写图形界面应用程序，甚至手机App。目前在用的有Qt4和Qt5两个版本。而PyQt4/PyQt5是对Qt的Python封装，通过它们，你可以使用Python来操作Qt的”C++身体”。本书的后半部分会有单独介绍使用PyQt制作图形界面应用程序的章节。</td>
</tr>
<tr>
<td>scipy</td>
<td>SciPy是个开源的免费Python库，其包含诸多模块以支持各种形式的科学和工程计算：优化、线性代数、积分、插值、FFT-快速傅里叶变换，信号和图像处理等。作者曾使用scipy.stats模块来进行某些健康人群生理指标的正态分布计算和估计。项目网址：<a href="http://www.scipy.org。" target="_blank" rel="noopener">www.scipy.org。</a></td>
</tr>
<tr>
<td>pyserial</td>
<td>串口（包括虚拟串口）的Python语言接口。作者曾通过它让计算机与某些工业设备进行通信。</td>
</tr>
<tr>
<td>numpy</td>
<td>用C语言编写的多维数组模块，能快速地创建和计算多维数组。它是scipy, matplotlib, opencv-python等模块的基础。</td>
</tr>
<tr>
<td>opencv-python</td>
<td>提供OpenCV库的Python接口。OpenCV是一个主要针对实时计算机视觉的编程功能库，最初由英特尔开发。 该库是跨平台的，可以在开源BSD许可下使用。作者曾借助于OpenCV库来识别医疗监视图影像中的人眼瞳孔的位置和注视方向，以评估医疗对象在医学检查过程中的关注度。</td>
</tr>
<tr>
<td>cython</td>
<td>提供一种使用C和Python的混合语言编写Python扩展库的方法。</td>
</tr>
<tr>
<td>configparser</td>
<td>提供与设备的modbus通信协议支持。modbus是现代工业设备间常用的通信协议之一。读者家里的热水器或者中央空调如果有远程控制终端的话，这些远程控制终端与主机之间，很可能就是modbus协议，而在通信的底层，又很可能是485或者RS-232串口协议。作者曾用该模块让工业机器人与某种外部运动控制器进行交互。</td>
</tr>
<tr>
<td>tkinter</td>
<td>Python标准安装中自带的GUI工具包。帮助用户创建图形用户界面(Graphics User Interface)的应用程序。</td>
</tr>
<tr>
<td>ReportLab</td>
<td>一种用于绘图和生成PDF文档的开源软件包。</td>
</tr>
<tr>
<td>pygame</td>
<td>一个跨平台的Python游戏开发包。年幼的初学者或者童心未泯的大同学可以尝试用pygame开发一个街机游戏。这个包里还自带一些图像和音频库供学习者使用。</td>
</tr>
<tr>
<td>matplotlib</td>
<td>matplotlib是一个可绘制印刷级质量图表的跨平台2D/3D库，可以方便地从数据生成并绘制折线图、直方图、饼图和其它各种专业图表。</td>
</tr>
<tr>
<td>django,flask,pyramid</td>
<td>这三者都是基于Python的Web框架，简单地理解就是用于构建Web网站的。如果读者期望开发小型的Web应用，使用这些框架是合适的。但作者不得不说，当前最主流的Web前端框架是基于JavaScript的Bootstrap、Vue、React之类；而最主流的Web后端框架则是基于Java的SpringFramework。如果读者想学习构建专业的大型Web应用，至少目前，还是应该考虑由JavaScript、Java、HTML5、CSS3等构成的宠大的阵营。</td>
</tr>
<tr>
<td>pandas</td>
<td>Python Data Analysis Library - pandas最初是作为金融数据分析工具被开发出来的，它基于numpy。现在已经成为使用Python进行数据分析的主流工具。</td>
</tr>
</tbody></table>
<p>Python扩展库的使用者如果试图将软件商业化， 则需要注意相关扩展库的授权协议，常见的协议有：BSD, Apache，GPL, LGPL, MIT等等。这些协议描述了扩展库的拥有者对你的授权：是否可以商业化？ 是否必须开源？简单地说，BSD几乎不对使用者进行任何限制，而GPL则要求任何基于GPL开源代码的衍生软件也必须开源。遵重原作者的权利，是每个人的义务。在可能的情况下，尽可能开源和共享，是作者对读者的期待。</p>
<h3 id="A-2-2-了解模块"><a href="#A-2-2-了解模块" class="headerlink" title="A.2.2 了解模块"></a>A.2.2 了解模块</h3><p>使用一个模块(module)前必须先了解这个模块。除了网上检索，阅读其官网上提供的文档外，Python解释器还提供了一些简便的方法。说明一下，本节中的代码在Python控制台中直接执行或更为简便。</p>
<h4 id="A-2-2-1-dir"><a href="#A-2-2-1-dir" class="headerlink" title="A.2.2.1 dir"></a>A.2.2.1 dir</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#dir.py</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(type(os))</span><br><span class="line">print([x <span class="keyword">for</span> x <span class="keyword">in</span> dir(os) <span class="keyword">if</span> <span class="keyword">not</span> x.startswith(<span class="string">"_"</span>)])</span><br></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;class &#39;module&#39;&gt;</span><br><span class="line">[&#39;DirEntry&#39;, ..., &#39;abc&#39;, &#39;abort&#39;, &#39;access&#39;, &#39;altsep&#39;, &#39;chdir&#39;, &#39;chmod&#39;, &#39;close&#39;, &#39;closerange&#39;, &#39;cpu_count&#39;, &#39;curdir&#39;, &#39;defpath&#39;, &#39;device_encoding&#39;, &#39;devnull&#39;, &#39;dup&#39;, &#39;dup2&#39;, &#39;environ&#39;, &#39;error&#39;, ... &#39;getcwd&#39;, &#39;getcwdb&#39;, &#39;getenv&#39;, &#39;getlogin&#39;, &#39;getpid&#39;, &#39;getppid&#39;, &#39;isatty&#39;, &#39;kill&#39;, &#39;linesep&#39;, &#39;link&#39;, &#39;listdir&#39;, &#39;lseek&#39;, &#39;lstat&#39;, &#39;makedirs&#39;, &#39;mkdir&#39;, &#39;name&#39;, &#39;open&#39;, &#39;pardir&#39;, &#39;path&#39;, &#39;pathsep&#39;, &#39;pipe&#39;, &#39;popen&#39;, &#39;putenv&#39;, &#39;read&#39;, ..., &#39;sys&#39;, &#39;system&#39;, &#39;terminal_size&#39;, &#39;times&#39;, &#39;times_result&#39;, &#39;truncate&#39;, ..., &#39;utime&#39;, &#39;waitpid&#39;, &#39;walk&#39;, &#39;write&#39;]</span><br></pre></td></tr></table></figure>

<p>上述执行结果中的省略号是作者打的，目的是节约用纸，保卫地球。</p>
<p>import os之后，os对于解释器而言，也仅是一个名字而已， 这个名字关联的对象是模块(module)类型。dir(os)返回一个列表，列出了os模块内的全部属性，包括函数、类、变量等等。读者可以看到，上述代码的第三行使用了列表推导来过滤掉那些预期仅用于模块内部的以下划线开头的名字。</p>
<p>一个有经验，或者有英文基础的编程者很容易从dir(os)返回的信息中找到有价值的函数和功能。比如，chdir()函数显然是change directory的缩写，其用途是修改程序的当前工作路径。</p>
<h4 id="A-2-2-2-all-属性"><a href="#A-2-2-2-all-属性" class="headerlink" title="A.2.2.2 __all__属性"></a>A.2.2.2 __all__属性</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#all.py</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(os.__all__)</span><br></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#39;altsep&#39;, &#39;curdir&#39;, &#39;pardir&#39;, &#39;sep&#39;, &#39;pathsep&#39;, &#39;linesep&#39;, &#39;defpath&#39;, &#39;name&#39;, &#39;path&#39;, ..., &#39;abort&#39;, &#39;access&#39;, &#39;chdir&#39;, &#39;chmod&#39;, &#39;close&#39;, &#39;closerange&#39;, &#39;cpu_count&#39;, &#39;device_encoding&#39;, &#39;dup&#39;, &#39;dup2&#39;, &#39;environ&#39;, &#39;error&#39;, &#39;execv&#39;, &#39;execve&#39;, &#39;fspath&#39;, &#39;fstat&#39;, &#39;fsync&#39;, &#39;ftruncate&#39;, &#39;get_handle_inheritable&#39;, &#39;get_inheritable&#39;, &#39;get_terminal_size&#39;, &#39;getcwd&#39;, &#39;getcwdb&#39;, &#39;getlogin&#39;, &#39;getpid&#39;, &#39;getppid&#39;, &#39;isatty&#39;, &#39;kill&#39;, &#39;link&#39;, &#39;listdir&#39;, ... , &#39;mkdir&#39;, &#39;open&#39;, &#39;pipe&#39;, &#39;putenv&#39;, &#39;read&#39;, &#39;readlink&#39;, &#39;remove&#39;, &#39;rename&#39;, &#39;replace&#39;, &#39;rmdir&#39;, &#39;scandir&#39;, ..., &#39;system&#39;, &#39;terminal_size&#39;, &#39;times&#39;, &#39;times_result&#39;, &#39;truncate&#39;, &#39;umask&#39;, &#39;uname_result&#39;, &#39;unlink&#39;, &#39;urandom&#39;, &#39;utime&#39;, &#39;waitpid&#39;, &#39;write&#39;, &#39;makedirs&#39;, &#39;removedirs&#39;, &#39;renames&#39;, &#39;walk&#39;, &#39;execl&#39;, &#39;execle&#39;, &#39;execlp&#39;, &#39;execlpe&#39;, &#39;execvp&#39;, &#39;execvpe&#39;, &#39;getenv&#39;, ..., &#39;spawnle&#39;]</span><br></pre></td></tr></table></figure>

<p>有经验的程序员或者仅凭上述输出就可以大致了解os模块的用途。比如, mkdir()函数有点象makedir的缩写，是的，它的功能就是创建一个目录；那getcwd呢？ get current working directory，返回当前工作路径；kill呢？杀谁？它可以杀死一个操作系统进程。初学者如猜不出上述名称的意义，是正常表现，不要沮丧。</p>
<p>这个属性叫做__all__，但名不符实。这个属性是一个列表，包含了模块开发者认为的预期可以被使用者使用的部分名字。言下之意，那些没有包括在该列表内的名字，则属于模块＂隐藏的实现＂(hidden implementation)，不欢迎使用者＂强行＂访问。</p>
<p>如果我们执行代码from os import *，则会将os.__all__下的名字引入当前程序的全局作用域当中。如果我们自己写模块，那么为模块恰当地定义__all__属性是必要的：仅把那些用于接口的名字包括在该属性列表中。</p>
<p>作者打开了os模块的源文件:os.py，在其中，找到了下述赤裸裸的代码：__all__属性就是这么直接了当地被初始化然后又在后面的代码中逐渐增加名字。这段代码中第一行的注释提醒阅读者：不要误以为__all__只包含这些初始的名字，后面还会逐步增加。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Note:  more names are added to __all__ later.</span></span><br><span class="line">__all__ = [<span class="string">"altsep"</span>, <span class="string">"curdir"</span>, <span class="string">"pardir"</span>, <span class="string">"sep"</span>, <span class="string">"pathsep"</span>, <span class="string">"linesep"</span>,</span><br><span class="line">           <span class="string">"defpath"</span>, <span class="string">"name"</span>, <span class="string">"path"</span>, <span class="string">"devnull"</span>, <span class="string">"SEEK_SET"</span>, <span class="string">"SEEK_CUR"</span>,</span><br><span class="line">           <span class="string">"SEEK_END"</span>, <span class="string">"fsencode"</span>, <span class="string">"fsdecode"</span>, <span class="string">"get_exec_path"</span>, <span class="string">"fdopen"</span>,</span><br><span class="line">           <span class="string">"popen"</span>, <span class="string">"extsep"</span>]</span><br><span class="line">...</span><br><span class="line">__all__.extend([<span class="string">"makedirs"</span>, <span class="string">"removedirs"</span>, <span class="string">"renames"</span>])</span><br><span class="line">__all__.append(<span class="string">"walk"</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>



<h4 id="A-2-2-3-help-函数"><a href="#A-2-2-3-help-函数" class="headerlink" title="A.2.2.3 help()函数"></a>A.2.2.3 help()函数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#help.py</span></span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> chdir</span><br><span class="line">print(<span class="string">"------------help(chdir)---------------"</span>)</span><br><span class="line">help(chdir)</span><br><span class="line">print(<span class="string">"------------chdir.__doc__-------------"</span>)</span><br><span class="line">print(chdir.__doc__)</span><br></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">------------help(chdir)---------------</span><br><span class="line">Help on built-in function chdir in module nt:</span><br><span class="line"></span><br><span class="line">chdir(path)</span><br><span class="line">    Change the current working directory to the specified path.</span><br><span class="line">    </span><br><span class="line">    path may always be specified as a string.</span><br><span class="line">    On some platforms, path may also be specified as an open file descriptor.</span><br><span class="line">      If this functionality is unavailable, using it raises an exception.</span><br><span class="line"></span><br><span class="line">------------chdir.__doc__-------------</span><br><span class="line">Change the current working directory to the specified path.</span><br><span class="line"></span><br><span class="line">path may always be specified as a string.</span><br><span class="line">On some platforms, path may also be specified as an open file descriptor.</span><br><span class="line">  If this functionality is unavailable, using it raises an exception.</span><br></pre></td></tr></table></figure>

<p>上述代码中，我们通过help()函数查看了chdir函数的使用帮助。上述信息指出，上述chdir()函数接受一个path参数，其作用是将系统的当前工作路径切换至指定路径。这是关于这个函数最可靠，最直接的文档。</p>
<p>通过print(chdir.__doc__)也可以获得类似信息，只不过内容更少一点。</p>
<h4 id="A-2-2-4-查看源代码"><a href="#A-2-2-4-查看源代码" class="headerlink" title="A.2.2.4 查看源代码"></a>A.2.2.4 查看源代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#file.py</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(os.__file__)</span><br></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\CH\AppData\Local\Programs\Python\Python37\lib\os.py</span><br></pre></td></tr></table></figure>

<p>透过模块的__file__属性，我们可以查询到模块的源码文件的路径。可以使用Visual Studio Code打开该源码文件以期了解其内部实现。注意，千万不要修改标准库中的源码文件。</p>
<h4 id="A-2-2-5-Python文档"><a href="#A-2-2-5-Python文档" class="headerlink" title="A.2.2.5 Python文档"></a>A.2.2.5 Python文档</h4><p>除了上述途径之外，如果读者的英文还过得去，Python解释器的原始文档是获取简洁可靠帮助信息的最佳途径。在安装了Python解释器之后，Windows的开始菜单中可以找到Python 3.x Manuals。</p>
<p>作为选项，读者也可以直接访问python.org，当前网址是：<a href="https://docs.python.org/3/。" target="_blank" rel="noopener">https://docs.python.org/3/。</a></p>
<p>这些信息源远比使用搜索引擎搜出来的转了N次的信息更为可靠。顺便说一句，如果读者想成为专业的程序员，英文如果不好，多半是个硬伤。    </p>
<h3 id="A-2-3-创建模块"><a href="#A-2-3-创建模块" class="headerlink" title="A.2.3 创建模块"></a>A.2.3 创建模块</h3><p>一般地，模块就是程序员编写的构成应用程序的多个Python文件中的某一个文件，它负责完成程序当中的某个特定任务。为了说清问题，作者期望构建一个名为Stat的模块。这个模块虽然简单，但它来自于作者真实的软件项目实践。</p>
<table>
<thead>
<tr>
<th>Stat模块需求简述</th>
</tr>
</thead>
<tbody><tr>
<td>- 在自动化蔬菜种植工厂中负责叶菜(典型如韭菜)收割的机器人需要对工作量进行统计，该功能被抽象成Stat模块。该模块需要记录和管理两个数据：1. 从机器人交付之日起，总共收割的叶菜周转盘数；2. 本次开机后，机器人总共收割的叶菜周转盘处。<br>- 模块应负责这些数据的自动存取，机器人启动时自动从文件读取计数，数据能在机器人的多次启闭间得到保持。</td>
</tr>
</tbody></table>
<p>作者创建了一个名为”Stat.py”的文件，这个文件就是一个Python模块，模块名即文件名Stat：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Stat.py</span></span><br><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stat</span>:</span></span><br><span class="line">    sFileName = os.path.expanduser(<span class="string">'~'</span>) + os.sep + <span class="string">"stat.dat"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__load()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__load</span><span class="params">(self)</span>:</span></span><br><span class="line">        data = configparser.ConfigParser()</span><br><span class="line">        data.read(Stat.sFileName)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">"Stats"</span> <span class="keyword">not</span> <span class="keyword">in</span> data.keys():</span><br><span class="line">            data[<span class="string">"Stats"</span>] = &#123;&#125;</span><br><span class="line">        self.iCounter = <span class="number">0</span></span><br><span class="line">        self.iTotal = int(data[<span class="string">"Stats"</span>].get(<span class="string">"iTotal"</span>,<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__save</span><span class="params">(self)</span>:</span></span><br><span class="line">        data = configparser.ConfigParser()</span><br><span class="line">        data[<span class="string">"Stats"</span>] = &#123;&#125;</span><br><span class="line">        data[<span class="string">"Stats"</span>][<span class="string">"iCounter"</span>] = str(self.iCounter)</span><br><span class="line">        data[<span class="string">"Stats"</span>][<span class="string">"iTotal"</span>] = str(self.iTotal)</span><br><span class="line">        <span class="keyword">with</span> open(Stat.sFileName,<span class="string">"w"</span>) <span class="keyword">as</span> f:</span><br><span class="line">            data.write(f)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.iCounter += <span class="number">1</span></span><br><span class="line">        self.iTotal += <span class="number">1</span></span><br><span class="line">        self.__save()</span><br><span class="line"></span><br><span class="line">print(__name__,<span class="string">"module imported."</span>)</span><br><span class="line">stat = Stat()</span><br></pre></td></tr></table></figure>

<p>这个简单的模块做了如下几件事情。首先，它定义了一个名为Stat的新类。按照<strong>万物皆对象</strong>的理论，这个模块本身是一个对象，Stat类是这个对象作用域下的子对象。一个Stat对象包括两个数据成员，iCounter用于记录本次启动后收割的叶菜盘数，iTotal则记录机器人历史上总共收割的叶菜盘数。我们注意到，Stat类通过configparser将相关数据存取至结构化ini文件中，其__load()、__save()方法分别负责数据读取和存储。这两个方法通过函数名前加下划线的形式被隐藏起来了，出于接口简便性的考虑，模块的作者并不希望使用者直接使用这两个方法。Stat类的add()方法将相关计数加1然后保存至文件，这是该类唯一向外提供的接口。接下来，通过print()函数，模块打印了一行表示自身被导入的消息。最后，模块创建了一个名为stat的Stat类型对象。</p>
<p>代码中的os.path.expanduser(‘~’)用于返于当前操作系统登录用户的Home目录，读者可以在代码中加一行，print(sFileName)，看看该路径在哪里。注意，os.sep返回当前操作系统所使用的路径分隔符，在Windows系统下，该分隔符为”\“，而在Linux下，则为”/“。</p>
<p>做个简单的总结：Stat模块自身是一个对象，有单独的作用域，其下有两个名字，Stat和stat，Stat是一个类，stat则是Stat类型的对象。</p>
<h3 id="A-2-4-使用模块"><a href="#A-2-4-使用模块" class="headerlink" title="A.2.4 使用模块"></a>A.2.4 使用模块</h3><p>模块是用来做定义的，也就是向系统介绍新的类、新的函数。不要试图在模块中过多地直接运行功能性代码。模块因被使用而体现其价值。作者创建了一个名为Main.py的程序来模拟上节Stat模块的使用者。当前，Main.py和Stat.py被放在同一个目录内。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Main.py</span></span><br><span class="line"><span class="keyword">from</span> Stat <span class="keyword">import</span> stat</span><br><span class="line">print(<span class="string">"-------------华丽分界线--------------------"</span>)</span><br><span class="line"><span class="keyword">import</span> Stat</span><br><span class="line"><span class="keyword">import</span> Stat</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">print(<span class="string">"id(stat):"</span>,id(stat), <span class="string">"id(Stat.stat):"</span>,id(Stat.stat))</span><br><span class="line">print(<span class="string">"Stat.Stat:"</span>,Stat.Stat)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(random.randint(<span class="number">1</span>,<span class="number">16</span>)):</span><br><span class="line">    stat.add()</span><br><span class="line"></span><br><span class="line">print(<span class="string">"Stat: &#123;&#125;/&#123;&#125;."</span>.format(stat.iCounter,stat.iTotal))</span><br></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#39;Stat&#39; module imported.</span><br><span class="line">-------------华丽分界线--------------------</span><br><span class="line">id(stat): 2740458324096 id(Stat.stat): 2740458324096</span><br><span class="line">Stat.Stat: &lt;class &#39;Stat.Stat&#39;&gt;</span><br><span class="line">Stat: 13&#x2F;76.</span><br></pre></td></tr></table></figure>

<p>首先，代码通过from Stat import stat以及import Stat两种方式共3次导入Stat模块。根据“华丽分界线”所表达的成果，我们注意到只有第一次导入时Stat模块被真正运行并打印了”Stat module imported.”的信息。模块只在第一次被导入时被运行是一个重要的特性：首先当然节省时间；其次，当A模块引用B模块，B模块引用A模块的复杂状态发生时，该特性可以避免无穷的导入循环。</p>
<p>import Stat导入了模块Stat，可以把该模块视为一个有独立作用域的对象。此时，如果你希望使用该模块内的Stat类，完整的名称就应该是Stat.Stat。对该名字的打印结果证实，它就是一个类对象，类型为&lt;class ‘Stat.Stat’&gt;。而模块内的类型为Stat的变量stat，其完整名称应为Stat.stat。</p>
<p>from Stat import stat是另外一种语法，它完成两件事：导入运行Stat模块; 将Stat模块内的名字stat”介绍”至当前作用域。此时，Stat.stat与stat两个名字处于不同作用域，但显然，它们绑定在同一个对象上。执行结果中显示的id值证明了这一点。</p>
<p>接下来，代码通过random模块生成一个介于1和16之间的随机数并执行stat.add()模拟机械人的收割工作。在经过多次运行后，作者得到13/76的计数值，证明该模块内的计数在不同次运行之间得到了良好保存。</p>
<p>作者还想提一下Stat模块的小而美的设计，它提供简单的接口 - add()函数，并把“复杂”的实现 - 数据存取部分隐藏起来。这样，将来模块的作者就有机会将计数的存储位置由文件改成数据库，而模块的使用者几乎不用做任何适应性修改。</p>
<h3 id="A-2-5-模块测试"><a href="#A-2-5-模块测试" class="headerlink" title="A.2.5 模块测试"></a>A.2.5 模块测试</h3><p>在模块Stat中，我们注意到一行代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(__name__,<span class="string">"module imported."</span>)</span><br></pre></td></tr></table></figure>

<p>当Stat模块被Main.py导入并导致其运行时，__name__的值为’Stat’。读者可以尝试直接运行Stat.py，此时解释器内置变量__name__的值为’__main__‘。</p>
<p>所以，如果模块的设计者试图给模块添加一些测试代码并希望当且仅当该模块文件被单独运行时才执行测试代码，可以这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    execModuleTest()</span><br></pre></td></tr></table></figure>



<h3 id="A-2-6-包"><a href="#A-2-6-包" class="headerlink" title="A.2.6 包"></a>A.2.6 包</h3><p>在一个应用程序中，Python程序文件可能多达几十甚至几千个。我们不可能把所有的文件都放在同一目录下，这样太乱了。读者可以简单地认为包(package)就是包含模块文件和其它包的文件目录。</p>
<p>在Visual Studio Code中，作者在项目目录下新建了一个名为Utils的子目录 - folder，然后把之前的Stat.py移至该子目录下。按照Python规范的要求，还在子目录下创建了一个名为__init__.py的文件。这个__init__.py文件的存在，是这个目录可以当成包使用的<strong>必要</strong>条件。简言之，我们现在有了这样一个目录结构，Main.py所在目录有一个名为Utils的子目录，子目录下有文件__init__.py以及Stat.py。</p>
<p><img src="/images/%E5%8C%85%E7%BB%93%E6%9E%84.png" alt=""></p>
<p>现在，Stat模块不再与Main.py处于同一目录，而是处于下方包Utils之内。现在的Main.py应做相应修改，以便使用Stat模块。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Main2.py</span></span><br><span class="line"><span class="keyword">from</span> Utils.Stat <span class="keyword">import</span> stat</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(random.randint(<span class="number">1</span>,<span class="number">16</span>)):</span><br><span class="line">    stat.add()</span><br><span class="line"></span><br><span class="line">print(<span class="string">"Stat: &#123;&#125;/&#123;&#125;."</span>.format(stat.iCounter,stat.iTotal))</span><br></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Utils.Stat module imported.</span><br><span class="line">Stat: 12&#x2F;251.</span><br></pre></td></tr></table></figure>

<p>可以看到，对于模块Stat而言，其__name__已变成了”Utils.Stat”。当然，我们还有更多在Main.py内导入模块的方法。只不过导入方法不同，名字的作用域会不同，下表以模块内的stat变量为例，说明这种差异。</p>
<table>
<thead>
<tr>
<th>不同模块导入方法</th>
<th>stat名字全称</th>
</tr>
</thead>
<tbody><tr>
<td>- from Utils import Stat</td>
<td>Stat.stat</td>
</tr>
<tr>
<td>- import Utils.Stat</td>
<td>Utils.Stat.stat</td>
</tr>
</tbody></table>
<p>作为一个对象，包Utils也可以有代码和属性，而__init__.py则可用于此目的。作者修改了Utils下的__init__.py：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Utils/__init__.py</span></span><br><span class="line">print(__name__,<span class="string">"package imported."</span>)</span><br><span class="line">something = <span class="string">"something"</span></span><br></pre></td></tr></table></figure>

<p>如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#useutils.py</span></span><br><span class="line"><span class="keyword">import</span> Utils</span><br><span class="line">print(Utils.something)</span><br></pre></td></tr></table></figure>

<p>将得到下述执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Utils package imported.</span><br><span class="line">something</span><br></pre></td></tr></table></figure>



<h3 id="A-2-7-应用程序的目录结构"><a href="#A-2-7-应用程序的目录结构" class="headerlink" title="A.2.7 应用程序的目录结构"></a>A.2.7 应用程序的目录结构</h3><p>如同列表可以包含列表一样，包也可以包含子包。所以，一个模块众多的应用程序，通常长成下述模样：在项目的主目录下，有一个程序的总启动文件，比如Main.py。然后在主目录下，有众多的子目录-包，以及众多的更下层子目录。每一个子目录内的模块都完成一个特定的任务，有的负责执行关键任务，有的完成系统配置，有的负责报表生成和打印……  众多模块分工合作，形成一个完整的应用程序。</p>
<p>下图展示了作者编写的一个应用程序的目录结构，这是一个用于眼科医疗仪器的用Python编写的软件。其中，PeriI.py3是项目的主启动文件。读者可以看到，在PeriI.py3所在项目主目录下，有众多的下层目录及下下层目录。</p>
<p><img src="/images/1563382343039.png" alt="1563382343039"></p>
<h3 id="A-2-8-让程序找到你的模块"><a href="#A-2-8-让程序找到你的模块" class="headerlink" title="A.2.8 让程序找到你的模块"></a>A.2.8 让程序找到你的模块</h3><p>如果是项目私用的模块，那么按照上一节所描述的方法组织项目的目录结构就很好。如果希望把模块/包开放给其它应用程序或者程序员所使用，我们就需要了解Python解释器是如何定位包/模块的。也就是说，当解释器遇到一个import语句要求导入一个包/模块，解释器去哪里找到这个包/模块呢？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#libpath.py</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pprint</span><br><span class="line">sys.path.append(<span class="string">"d:\\UserDefinedPath"</span>)</span><br><span class="line">pprint.pprint(sys.path)</span><br></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[&#39;d:\\pylearn\\C14_Modules&#39;,</span><br><span class="line"> &#39;c:\\Users\\Alex\\.vscode\\extensions\\ms-python.python-2019.6.22090\\pythonFiles&#39;,</span><br><span class="line"> &#39;C:\\Users\\Alex\\AppData\\Local\\Programs\\Python\\Python37\\python37.zip&#39;,</span><br><span class="line"> &#39;C:\\Users\\Alex\\AppData\\Local\\Programs\\Python\\Python37\\DLLs&#39;,</span><br><span class="line"> &#39;C:\\Users\\Alex\\AppData\\Local\\Programs\\Python\\Python37\\lib&#39;,</span><br><span class="line"> &#39;C:\\Users\\Alex\\AppData\\Local\\Programs\\Python\\Python37&#39;,</span><br><span class="line"> &#39;C:\\Users\\Alex\\AppData\\Roaming\\Python\\Python37\\site-packages&#39;,</span><br><span class="line"> &#39;C:\\Users\\Alex\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages&#39;,</span><br><span class="line"> &#39;d:\\UserDefinedPath&#39;]</span><br></pre></td></tr></table></figure>

<p>当试图导入包/模块时，解释器会沿sys.path指引的路径逐一查找。你可以通过sys.path.append()函数将你自定义的模块路径加入到sys.path当中。也可以把相应包和模块拷贝到site-packages目录(推荐放这里)。</p>
<p>我们还注意到，上述打印结果的第一行就是被运行的Python主文件的所在目录。这说明，当前工作路径是优先被搜索的。</p>
<p>说明一下，pprint即是一个打印模块，它可以相对漂亮地处理文本输出。</p>
<h3 id="A-2-9-标准库"><a href="#A-2-9-标准库" class="headerlink" title="A.2.9 标准库"></a>A.2.9 标准库</h3><p>Python的标准安装里自动附带了很多的标准库，使得你“几乎”能够立即着手真正的工作，这就是Frank Stajano提出的”Batteries Included” - 电池已配，有人形象称之为“开箱即用”。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>简介</th>
</tr>
</thead>
<tbody><tr>
<td>sys</td>
<td>- 允许程序员访问与Python解释器紧密相关的变量和函数。比如:<br>    argv - 命令行参数；<br>    path - 模块搜索路径列表；<br>    platform - 平台标识，表示当前解释器在何种操作系统下运行，比 win32, linux之类；<br>    stdin,stdout,stderr - 标准输入，输出，错误流；<br>    exit([arg]) - 函数，退出应用程序。</td>
</tr>
<tr>
<td>os</td>
<td>- 允许程序员使用操作系统服务。os是operating system的简写，就是操作系统的意思。通过该模块，程序员可以创建、删除文件夹，执行外部程序，开启新的进程，获取设置系统环境变量，获取当前工作路径等等。读者可以尝试打印一下os.environ，它即是一个包含了全部环境变量的字典。</td>
</tr>
<tr>
<td>heapq</td>
<td>- 堆是一种著名的数据结构，也称为优先队列。借助于堆/heap，可以在log(n)的计算复杂性下从n个元素中取得最大值或者最小值。请参考数据结构教材中的“堆排序”一节。heapq模块支持Python下的堆操作。</td>
</tr>
<tr>
<td>collections</td>
<td>- 包含一些容器类数据类型，比如双端队列(deque)。</td>
</tr>
<tr>
<td>time,datetime</td>
<td>- 支持日期和时间获取与操作。</td>
</tr>
<tr>
<td>timeit</td>
<td>- 可帮助计算代码段的执行时间。</td>
</tr>
<tr>
<td>random</td>
<td>- 伪随机数生成模块： <br>    random() - 返回一个0-1的随机实数；<br>    choice(seq) - 从序列seq中随机返回一个元素; <br>    shuffle(seq[,random]) - 把序列打乱；<br>    sample(seq,n) - 从序列seq中随机选择n个值不同的元素。</td>
</tr>
<tr>
<td>shelve</td>
<td>- 提供数据的文件存取支持，作用类似于json，但存储格式不同。</td>
</tr>
<tr>
<td>re</td>
<td>- <strong>正则表达式 - regular expression</strong>模块。正则表达式是处理复杂形式字符串匹配/替换等操作的强大工具，可以完成诸如从邮件文本中提取出发件人，从隋唐演义中找到所有的李姓人名并统计出场次数，从网页文本中提取各种格式电话号码这样复杂的任务。它很强大，也很复杂。当读者遇到需要对文本进行复杂操作的任务时，请别忘了re模块。</td>
</tr>
<tr>
<td>logging</td>
<td>- 提供一系列应用程序日志的记录工具。看起来，作者好像也犯了重新发明轮子的错误: 读者可以查询标准库文档，看看是否可以优化第12章的出错日志一节的程序。</td>
</tr>
</tbody></table>
<h3 id="A-2-10-扩展库的安装方法"><a href="#A-2-10-扩展库的安装方法" class="headerlink" title="A.2.10  扩展库的安装方法"></a>A.2.10  扩展库的安装方法</h3><p><a href="https://codelearn.club/2019/06/pipinstall/">https://codelearn.club/2019/06/pipinstall/</a></p>
<p>本书同名免费MOOC<strong>《Python编程基础及应用》</strong>在哔哩哔哩（B站）热播，点击加入，作者带着你学。</p>
<hr>
<iframe src="//player.bilibili.com/player.html?aid=34409478&bvid=BV1kt411R7uW" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" height="400" width="100%"> </iframe>





<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><p>14-1 请在你的计算机上使用pip install安装numpy, scipy，matplotlib, PyQt5, opencv-python等扩展库。安装前后请注意Python安装路径下site-packages 子目录里的变化。 </p>
<p>14-2 使用dir(), help()等函数了解numpy模块的功能。</p>
<p>14-3 将13章随书代码中的fibiter.py修改成一个模块文件，即删去除Fibonacci类定义之外的执行代码部分。然后，在同一目录下编写一个名为fibdemo.py的代码文件，在其中导入fibiter.py中的Fibonacci类，并使用该类迭代打印斐波那契数列的前20项。</p>

          
        </div>
        
          <br>
          


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-10-12T12:53:07+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2020年10月12日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Python/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i>&nbsp;<p>Python</p></a></div>


        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="QQ好友" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=http://codelearn.club/2020/06/lib/&title=附录A.2. 模块及扩展库 | Python,C/C++ Club&pics=https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png&summary=附录A.2. 模块及扩展库  《Python编辑基础及应用》"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="QQ空间" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://codelearn.club/2020/06/lib/&title=附录A.2. 模块及扩展库 | Python,C/C++ Club&pics=https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png&summary=附录A.2. 模块及扩展库  《Python编辑基础及应用》"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class='qrcode' rel="external nofollow noopener noreferrer" href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKklEQVR42u3aSW7DMAwF0Nz/0u42BRr5U1SCRnpaBfH4vCA46PGI1/W0nv8Zn1k9Z3zVgoWBgfG1jGu4Og8e36F6/5sPhIGBcQAjeYkkpCZB8wpW/m4YGBgY43Py+1RDMwYGBkY/4L66Njk6Ti4xMDAwOkVsPxznsDfW4hgYGF/IyLvun//9lvkGBgbGVzGu4kqa+NVQPvcmv+6DgYGxNWMuscvb9/3WWyHRxMDA2JTRT9TygnPuG48D9GNVvomBgfGPGdUxZJIa5k3/6mAg346GgYGxE6Pj7hSx1Y7ZzefGwMA4gJGkX9U22aoQHB3FwMDYmpEXonmCONdi67AxMDBOYFR7VtWhY393RGtbBgYGxkaMTkO/WtzOJYLJ/xgYGPsxqgXk2gQuH44WylcMDIztGHMRutN6W7W1AgMD4xxGIXMsjiSr1+bDiT+OYmBgHMZIxgadAUAyhKg+EQMD4wTGHCYvYvPhZZLDvqzFMTAwNmXMFaWrNk9Ut5HdPBcDA+MARqeJP5dcllPA8f8YGBgHMD4fcBfvGcHAwDiGkQTBaqqXf5p8tFDo9mFgYHw54yqu6gCgv8ksSiUxMDC2ZlQL0VWJYD4SqF6LgYGxK6O/6SFPBDubNm7GohgYGAcw+g39anOtuuHj5hNgYGBgxE20TgDN36qw2QIDA+NgRmfAmRwtjxMwMDAOYFSHAXlbLSlZq2kiBgbGaYy50jFHzgXcJAHFwMA4gPEDVtQZBv/ST3EAAAAASUVORK5CYII='>
        
          <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/wechat.png">
        
        </a>
      
    
      
        <a class="-mob-share-weibo" title="微博" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=http://codelearn.club/2020/06/lib/&title=附录A.2. 模块及扩展库 | Python,C/C++ Club&pics=https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png&summary=附录A.2. 模块及扩展库  《Python编辑基础及应用》"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
              <section class="prev">
                <span class="art-item-left">
                  <h4>
                    <a href="/2020/09/pylesson/" rel="prev" title="那门用Python讲授的程序设计课程能带给学生什么？">
                      <i class="fas fa-chevron-left" aria-hidden="true"></i>
                      
                        那门用Python讲授的程序设计课程能带给学生什么？
                      
                    </a>
                  </h4>
                  
                    
                    <h6 class="tags">
                      &nbsp;<a class="tag" href="/tags/Python/"><i class="fas fa-tag" aria-hidden="true"></i> Python</a>
                    </h6>
                  
                </span>
              </section>
            
            
              <section class="next">
                <span class="art-item-right" aria-hidden="true">
                  <h4>
                    <a href="/2020/05/getpycode/" rel="prev" title="如何下载《Python编程基础及应用》课程的源代码(pylearn)">
                      
                        如何下载《Python编程基础及应用》课程的源代码(pylearn)
                      
                      <i class="fas fa-chevron-right" aria-hidden="true"></i>
                    </a>
                  </h4>
                  
                    
                    <h6 class="tags">
                      <a class="tag" href="/tags/Python/"><i class="fas fa-tag" aria-hidden="true"></i> Python</a>&nbsp;
                    </h6>
                  
                </span>
              </section>
            
          </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

  <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX","TeX"],
      linebreaks: { automatic:true },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
      Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += (all[i].SourceElement().parentNode.className ? ' ' : '') + 'has-jax';
    }
  });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>




  <script>
    window.subData = {
      title: '附录A.2. 模块及扩展库',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
    
      
      

<section class="widget grid  widget-blur desktop mobile">
  
  <header>
    
      <i class="fas fa-map-signs fa-fw" aria-hidden="true"></i><span class='name'>文档导航</span>
    
  </header>


  <div class='content'>
    <ul class="grid navigation">
      
        <li><a class="flat-box" title="/categories/Python/%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97/" href="/categories/Python/%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97/"
          
          
          id="categoriesPythonE7A791E5ADA6E8AEA1E7AE97">
          
            <i class="fas fa-question-circle fa-fw" aria-hidden="true"></i>
          
          科学计算
        </a></li>
      
        <li><a class="flat-box" title="/categories/Python/" href="/categories/Python/"
          
          
          id="categoriesPython">
          
            <i class="fas fa-play-circle fa-fw" aria-hidden="true"></i>
          
          Python
        </a></li>
      
        <li><a class="flat-box" title="/categories/C-C/" href="/categories/C-C/"
          
          
          id="categoriesC-C">
          
            <i class="fas fa-handshake fa-fw" aria-hidden="true"></i>
          
          C/C++
        </a></li>
      
        <li><a class="flat-box" title="/download/" href="/download/"
          
          
          id="download">
          
            <i class="fas fa-file-archive fa-fw" aria-hidden="true"></i>
          
          资源下载
        </a></li>
      
        <li><a class="flat-box" title="/mooc/" href="/mooc/"
          
            rel="external nofollow noopener noreferrer"
          
          
          id="mooc">
          
            <i class="fas fa-file-code fa-fw" aria-hidden="true"></i>
          
          MOOC
        </a></li>
      
        <li><a class="flat-box" title="/book/" href="/book/"
          
            rel="external nofollow noopener noreferrer"
          
          
          id="book">
          
            <i class="fas fa-clipboard-list fa-fw" aria-hidden="true"></i>
          
          图书订购
        </a></li>
      
    </ul>
  </div>
</section>

    
  
    
      
      

<section class="widget text  widget-blur desktop">
  
  <header>
    
      <a href='https://codelearn.club/'><i class="fab fa-github fa-fw" aria-hidden="true"></i><span class='name'>点个赞吧</span></a>
    
  </header>


  <div class='content'>
    
      <p>您的赞对我来说很重要，如果本网站的技术文章有帮到您，希望能够给下面的视频收藏点赞支持一下。</p>

    
      <p><a href="https://www.bilibili.com/video/av34409478/" target="_blank" rel="noopener"><img src="/images/pymooc.png" height="50px"></a></p>

    
      <p><a href="https://www.bilibili.com/video/av34586138/" target="_blank" rel="noopener"><img src="/images/cppmooc.png" height="56px"></a></p>

    
  </div>
</section>

    
  
    
      
      

<section class="widget qrcode  widget-blur desktop">
  
  <header>
    
      <i class="fas fa-mobile fa-fw" aria-hidden="true"></i><span class='name'>手机观看</span>
    
  </header>


  <div class='content article-entry'>
    
      
        <img src='/images/phone.png'
        >
      
    
  </div>
</section>

    
  
    
      
      


  <section class="widget toc-wrapper  widget-blur desktop mobile">
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#附录A-2-模块及扩展库"><span class="toc-text">附录A.2. 模块及扩展库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-1-Python扩展库"><span class="toc-text">A.2.1 Python扩展库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-2-了解模块"><span class="toc-text">A.2.2 了解模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-2-2-1-dir"><span class="toc-text">A.2.2.1 dir</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#A-2-2-2-all-属性"><span class="toc-text">A.2.2.2 __all__属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#A-2-2-3-help-函数"><span class="toc-text">A.2.2.3 help()函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#A-2-2-4-查看源代码"><span class="toc-text">A.2.2.4 查看源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#A-2-2-5-Python文档"><span class="toc-text">A.2.2.5 Python文档</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-3-创建模块"><span class="toc-text">A.2.3 创建模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-4-使用模块"><span class="toc-text">A.2.4 使用模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-5-模块测试"><span class="toc-text">A.2.5 模块测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-6-包"><span class="toc-text">A.2.6 包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-7-应用程序的目录结构"><span class="toc-text">A.2.7 应用程序的目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-8-让程序找到你的模块"><span class="toc-text">A.2.8 让程序找到你的模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-9-标准库"><span class="toc-text">A.2.9 标准库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-2-10-扩展库的安装方法"><span class="toc-text">A.2.10  扩展库的安装方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#练习"><span class="toc-text">练习</span></a></li></ol></li></ol>
    </div>
  </section>


    
  
</aside>


  
  <footer class="clearfix ">
    <br><br>
    
      
        <div class="aplayer-container">
          


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="mailto:chenbo@cqu.edu.cn"
                class="social fas fa-envelope flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://codelearn.club"
                class="social fab fa-github flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
        </div>
      
    
      
        <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
      
    
      
        本站使用
        <a href="https://volantis.js.org/" target="_blank" class="codename">volantis</a>
        作为主题
        
          ，
          总访问量为
          <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span>
          次
        
      
    
      
        <div class='copyright'>
        <p><a href="https://codelearn.club">Copyright © 2018-2020 海洋饼干叔叔</a></p>

        </div>
      
    
  </footer>

<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.6.4/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>




  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js" async></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>



  
  
  
    
<script src="//cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        if ('') {
          $('').backstretch(
          ["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/BBC19066-E176-47C2-9D22-48C81EE5DF6B.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/B18FCBB3-67FD-48CC-B4F3-457BA145F17A.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/00E0F0ED-9F1C-407A-9AA6-545649D919F4.jpeg"],
          {
            duration: "5000",
            fade: "2500"
          });
        } else {
          $.backstretch(
          ["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/BBC19066-E176-47C2-9D22-48C81EE5DF6B.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/B18FCBB3-67FD-48CC-B4F3-457BA145F17A.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/00E0F0ED-9F1C-407A-9AA6-545649D919F4.jpeg"],
          {
            duration: "5000",
            fade: "2500"
          });
        }
      });
    </script>
  











  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.6.4/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.6.4/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.6.4/js/comment_typing.js"></script>



<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  let COPY_SUCCESS = "复制成功";
  let COPY_FAILURE = "复制失败";
  /*页面载入完成后，创建复制按钮*/
  !function (e, t, a) {
    /* code */
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '  <i class="fa fa-copy"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        //您可以加入成功提示
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        success_prompt(COPY_SUCCESS);
        e.clearSelection();
      });
      clipboard.on('error', function(e) {
        //您可以加入失败提示
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
        fail_prompt(COPY_FAILURE);
      });
    }
    initCopyCode();

  }(window, document);

  /**
   * 弹出式提示框，默认1.5秒自动消失
   * @param message 提示信息
   * @param style 提示样式，有alert-success、alert-danger、alert-warning、alert-info
   * @param time 消失时间
   */
  var prompt = function (message, style, time)
  {
      style = (style === undefined) ? 'alert-success' : style;
      time = (time === undefined) ? 1500 : time*1000;
      $('<div>')
          .appendTo('body')
          .addClass('alert ' + style)
          .html(message)
          .show()
          .delay(time)
          .fadeOut();
  };

  // 成功提示
  var success_prompt = function(message, time)
  {
      prompt(message, 'alert-success', time);
  };

  // 失败提示
  var fail_prompt = function(message, time)
  {
      prompt(message, 'alert-danger', time);
  };

  // 提醒
  var warning_prompt = function(message, time)
  {
      prompt(message, 'alert-warning', time);
  };

  // 信息提示
  var info_prompt = function(message, time)
  {
      prompt(message, 'alert-info', time);
  };

</script>




<!-- fancybox -->

  <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>






  <script>setLoadingBarProgress(100);</script>
</body>
</html>
